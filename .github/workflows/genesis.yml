// â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
// â”ƒ ğŸ”® ritual_invoker_service.dart - Executor de rituais e gerador de artefatos â”ƒ
// â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

import 'dart:io';
import 'package:path/path.dart' as p;

class RitualInvokerService {
  final String recipesPath;
  final String outputPath;

  RitualInvokerService({
    required this.recipesPath,
    required this.outputPath,
  });

  Future<void> conjureAll() async {
    final Directory dir = Directory(recipesPath);

    if (!await dir.exists()) {
      print('âš ï¸ Pasta de receitas nÃ£o encontrada: $recipesPath');
      return;
    }

    final List<FileSystemEntity> files = dir
        .listSync(recursive: true)
        .where((f) => f is File && f.path.endsWith('.txt'))
        .toList();

    if (files.isEmpty) {
      print('â³ Nenhuma receita encontrada.');
      return;
    }

    for (final file in files) {
      final String name = p.basenameWithoutExtension(file.path);
      final String content = await File(file.path).readAsString();

      if (content.trim().isEmpty) {
        print('âš ï¸ Receita vazia: ${file.path}');
        continue;
      }

      final String artifact = _transform(content);
      final String outputFile = p.join(outputPath, '$name.dart');

      await File(outputFile).writeAsString(artifact);
      print('âœ… Artefato gerado: $outputFile');
    }
  }

  String _transform(String ritualText) {
    // SimulaÃ§Ã£o de transformaÃ§Ã£o mÃ¡gica
    return '''
// ğŸ”® Artefato gerado automaticamente
void main() {
  print("Executando ritual: ${ritualText.replaceAll('"', '\\"')}");
}
''';
  }
}

// SugestÃµes
// - ğŸ›¡ï¸ Validar sintaxe dos rituais antes de transformar
// - ğŸ”¤ Adicionar suporte a mÃºltiplos formatos de entrada (ex: YAML, JSON)
// - ğŸ“¦ Integrar com storage para registrar histÃ³rico de execuÃ§Ãµes
// - ğŸ§© Criar sistema de rollback para desfazer artefatos invÃ¡lidos
// - ğŸ¨ Expor status visual para UI com animaÃ§Ãµes de conjuraÃ§Ã£o

// âœï¸ byThyrrel  
// ğŸ’¡ CÃ³digo formatado com estilo tÃ©cnico, seguro e elegante  
// ğŸ§ª Ideal para conjuradores de cÃ³digo com foco em automaÃ§Ã£o limpa e confiÃ¡vel
