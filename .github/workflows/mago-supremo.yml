# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
# â”ƒ ğŸ§™ mago_supremo.yml - Ritual Completo de InvocaÃ§Ã£o e ObservaÃ§Ã£o           â”ƒ
# â”ƒ ğŸ“ Estrutura Corrigida | Mobile Friendly | 4 linhas visÃ­veis              â”ƒ
# â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

name: "ğŸ§™ Mago Supremo"

on:
  workflow_dispatch:
    inputs:
      invocacao:
        description: "ğŸ“œ Cole o ritual com a tag {nome}.txt"
        required: true
        type: string
        default: |
          {exemplo.txt}
          Seu prompt aqui...

permissions:
  contents: write

jobs:
  invocacao-consagrada:
    name: "ğŸ§¿ InvocaÃ§Ã£o Consagrada"
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ¯ Checkout do RepositÃ³rio
        uses: actions/checkout@v4
        with:
          ref: main

      - name: ğŸ” Extrair Nome do Artefato
        id: extrair
        run: |
          echo "ğŸ“¥ Texto recebido:"
          echo "${{ github.event.inputs.invocacao }}"
          
          # Extrair {nome}.txt
          if echo "${{ github.event.inputs.invocacao }}" | grep -qE '\{.*\.txt\}'; then
            NOME=$(echo "${{ github.event.inputs.invocacao }}" | grep -oE '\{.*\.txt\}' | sed 's/[{}]//g' | sed 's/\.txt//')
            echo "âœ… Nome extraÃ­do: $NOME"
          else
            NOME="artefato_$(date +%s)"
            echo "âš ï¸  Usando nome padrÃ£o: $NOME"
          fi
          
          echo "nome=$NOME" >> $GITHUB_OUTPUT

      - name: ğŸ“– Criar Arquivo na Recipes
        run: |
          mkdir -p recipes
          echo "# Artefato: ${{ steps.extrair.outputs.nome }}" > recipes/${{ steps.extrair.outputs.nome }}.txt
          echo "# Criado em: $(date)" >> recipes/${{ steps.extrair.outputs.nome }}.txt
          echo "# ConteÃºdo:" >> recipes/${{ steps.extrair.outputs.nome }}.txt
          echo "${{ github.event.inputs.invocacao }}" >> recipes/${{ steps.extrair.outputs.nome }}.txt
          echo "âœ… Arquivo criado: recipes/${{ steps.extrair.outputs.nome }}.txt"

      - name: ğŸ“¤ Fazer Commit das AlteraÃ§Ãµes
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add recipes/
          git commit -m "ğŸ“œ Artefato ${{ steps.extrair.outputs.nome }} consagrado" || echo "Sem mudanÃ§as para commit"
          git push

  observacao-multidimensional:
    name: "ğŸ‘ï¸ ObservaÃ§Ã£o Multidimensional"
    runs-on: ubuntu-latest
    needs: invocacao-consagrada
    steps:
      - name: ğŸ”® Simular ObservaÃ§Ã£o
        run: |
          echo "ğŸ‘ï¸ Observando trajetÃ³ria do artefato: ${{ needs.invocacao-consagrada.outputs.nome }}"
          echo "ğŸ“Š Status: Em anÃ¡lise dimensional..."
          echo "ğŸ¯ PrÃ³ximas verificaÃ§Ãµes: LIMBO â†’ Instrumentos â†’ GrimÃ³rio â†’ ExtraPlanares"
